(window["webpackJsonpmake-reducer"]=window["webpackJsonpmake-reducer"]||[]).push([[0],{27:function(e,t,n){e.exports=n(36)},36:function(e,t,n){"use strict";n.r(t);var r=n(11),o=n(1);var a=function(e){var t=e.dispatch,n=e.getState;return function(e){return function(r){return"function"===typeof r?r(t,n):e(r)}}},c=n(0),i=n.n(c),u=n(7),l=n(2);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(e,t){return e+":"+t},b=function(e){var t=e.indexOf(":");return[e.substring(0,t),e.substring(t+1)]};function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function(e){var t=[],n=e.name,r=e.state;return{infer:function(e){return e},inferEffect:function(e){return e},baseReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,o=arguments.length>1?arguments[1]:void 0,a=o.type,c=o.payload,i=b(a),u=i[1];if(i[0]!==n)return e;var l=t.find((function(e){return e[0]===u}));if(l)return f({},e,{},l[1](e,c,u));var s=new Error("action.type = ".concat(a,"\u6ca1\u6709\u5bf9\u5e94\u7684reducer\u5904\u7406\u51fd\u6570"));return console.error(s),e},subscribe:function(e,r){var o={},a=function(r){o[r]=function(e){return{type:d(n,r),payload:e}},t.push([r,e[r]])};for(var c in e)a(c);var i=function(e){var t=r[e];o[e]=function(e){return function(){return"function"===typeof t&&t(e,arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1])}}};for(var u in r)i(u);return o}}}({name:"User",state:{loadStatus:"beforeload",loadMsg:"",name:"tom",id:"5858fccee138233f9d645621",label:["student","human"]}}),g=v.subscribe,j=v.infer,h=v.inferEffect,w=(j((function(e,t,n){return y({},e,{loadStatus:t})})),g(y({setName:function(e,t,n){return y({},e,{name:t})},loadStatus:j((function(e,t,n){return y({},e,{loadStatus:t})}))},{loadStatus:function(e,t,n){return O({},e,{loadStatus:t})},loadDone:function(e,t){return O({},e,{loadMsg:t})},loadError:function(e,t){return O({},e,{loadMsg:t})},loading:function(e,t){return O({},e,{loadMsg:t})},beforeload:function(e,t){return O({},e,{loadMsg:t})}},{addLabel:j((function(e,t,n){return y({},e,{label:[].concat(Object(u.a)(e.label),Object(u.a)(t))})})),test:j((function(e,t,n){return y({},e)}))}),{delay:h((function(e,t,n){return t(w.loading("loading")),new Promise((function(t,n){setTimeout((function(){t(e)}),500)})).then((function(n){return t(w.loadDone("done")),t(w.addLabel([e])),n})).catch((function(){t(w.loadError("error"))}))}))})),P=v,E=Object(r.b)((function(e){return{user:e.users.user,name:e.tests.test.name,label:e.users.user.label,loadStatus:e.users.user.loadStatus}}))((function(e){return i.a.createElement("div",null,i.a.createElement("input",{placeholder:"\u8bf7\u586b\u5199label",id:"label-input"}),i.a.createElement("button",{disabled:"loading"===e.loadStatus,onClick:function(t){var n=document.querySelector("#label-input");e.dispatch(w.addLabel([n?n.value:""]))}},"\u7acb\u5373\u6dfb\u52a0\u4e00\u4e2alabel!"),i.a.createElement("button",{disabled:"loading"===e.loadStatus,onClick:function(t){var n=document.querySelector("#label-input");e.dispatch(w.delay(n?n.value:"")).then((function(e){console.log("promise then:",e)}))}},"\u5ef6\u8fdf\u4e00\u6bb5\u65f6\u95f4\u540e\uff0c\u6dfb\u52a0label!"),i.a.createElement("p",null,"\u7528\u6237\u4fe1\u606f: "),i.a.createElement("pre",null,JSON.stringify(e.user,null,4)))})),S=n(20);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var x=function(e){var t=e.namespace,n=e.initialState,r=e.reducers,o={},a=function(e){o[e]=function(n){return k({},n,{type:t+":"+e})}};for(var c in r)a(c);return{actions:o,reducer:function(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,a=arguments.length>1?arguments[1]:void 0,c=a.type,i=c.indexOf(":"),u=c.substring(0,i),l=c.substring(i+1);if(u!==t)return o;for(var s in r)s===l&&(e=r[s]);if(!e){var f=new Error("action:".concat(a,"\u6ca1\u6709\u5bf9\u5e94\u7684reducer\u5904\u7406\u51fd\u6570"));return console.error(f),o}var d=e(o,a);return console.log(d,e),d?k({},o,{},d):o}}},N=x({namespace:"test",initialState:{name:"tom",id:"5858fccee138233f9d645621",label:["student","human"]},reducers:{update:function(e,t){t.type;return k({},Object(S.a)(t,["type"]))},addLabel:function(e,t){var n=t.label;if(n)return{label:[].concat(Object(u.a)(e.label),Object(u.a)(n))}}}}),C=n(5);var T=n(21),M=function(e,t){return e+":"+t},R=function(e){var t=e.indexOf(":");return[e.substring(0,t),e.substring(t+1)]},J={name:"x",id:"y",desc:"x an y",family:{mama:"X",baba:"Y"}},L=function(e){var t=[],n=[],r=e.name,o=e.state;window[r+"_patchs"]=n;return{infer:function(e){return e},inferEffect:function(e){return e},baseReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,a=arguments.length>1?arguments[1]:void 0,c=a.type,i=a.payload,u=R(c),l=u[1];if(u[0]!==r)return e;var s=t.find((function(e){return e[0]===l}));if(s&&s[1])return Object(T.a)(e,(function(e){s&&s[1](e,i,l)}),(function(e,t){n.push({paths:e,inversePatches:t}),console.log(n[n.length-1])}));var f=new Error("action.type = ".concat(c,"\u6ca1\u6709\u5bf9\u5e94\u7684reducer\u5904\u7406\u51fd\u6570"));return console.error(f),e},subscribe:function(e,n){var o={},a=function(n){o[n]=function(e){return{type:M(r,n),payload:e}},t.push([n,e[n]])};for(var c in e)a(c);var i=function(e){var t=n[e];o[e]=function(e){return function(){return"function"===typeof t&&t(e,arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1])}}};for(var u in n)i(u);return o}}}({name:"demo1",state:J}),F=L.subscribe({setName:L.infer((function(e,t,n){e.name=t})),setID:L.infer((function(e,t,n){e.id=t})),setFamily:L.infer((function(e,t,n){Object.assign(e.family,t)}))},{delaySetName:L.inferEffect((function(e,t,n){return console.log("setTimeout before",n()),new Promise((function(r,o){setTimeout((function(){console.log("setTimeout",n()),t(F.setName(e)),console.log("setName after",n()),r(n())}),3e3)}))}))});function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(n,!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(){var e=function(){var e=Object(c.useReducer)((function(e){return{x:e.x+1}}),{x:1}),t=Object(C.a)(e,2);return{state:t[0],dispatch:t[1]}}(),t=(e.state,e.dispatch,function(e){var t=Object(c.useReducer)(e.model.baseReducer,e.initialState),n=Object(C.a)(t,2),r=n[0],o=n[1],a=e.actions,i=(e.initialState,e.model,{});function u(){return r}var l=function(e){i[e]=function(t){var n=a[e](t);return"function"===typeof n?n(o,u):o(n)}};for(var s in a)l(s);return[r,i]}({initialState:J,actions:F,model:L})),n=Object(C.a)(t,2),r=n[0],o=n[1],a=Object(c.useState)({id:"state3",title:"\u72b6\u60013",loadStatus:"beforeload"}),u=Object(C.a)(a,2),l=u[0],s=u[1];return i.a.createElement("div",null,i.a.createElement("h2",null,"Demo1"),i.a.createElement("hr",null),i.a.createElement("div",{onClick:function(e){o.setName(Math.random()+"")}},r.name),i.a.createElement("div",{dangerouslySetInnerHTML:{__html:"<\u767e\u5ea6>xxxx</\u767e\u5ea6>"}}),i.a.createElement("div",{onClick:function(e){o.setFamily({mama:r.family.mama+"1"})}},"click herer! Demo1.state = ",JSON.stringify(r)),i.a.createElement("div",{onClick:function(e){s(q({},l,{loadStatus:"loading"})),setTimeout((function(){console.log(l),s(q({},l,{loadStatus:"loaded"})),console.log(l)}),3e3),setTimeout((function(){s(q({},l,{id:l.id+"1"}))}),1e3)}},"click here! stat3 = ",JSON.stringify(l)))}var H,U={test:N.reducer},X={user:P.baseReducer},Y=Object(o.c)({tests:Object(o.c)(U),users:Object(o.c)(X)}),z=(H=Y,Object(o.a)(a),Object(o.d)(H,Object(o.a)(a)));console.log(z);var A=n(8),B=n.n(A),G=n(15),K=Object(G.b)({todos:[],get completedCount(){return this.todos.filter((function(e){return e.completed})).length}});Object(G.a)((function(){console.log("Completed %d of %d items",K.completedCount,K.todos.length)})),K.todos[0]={title:"Take a walk",completed:!1},K.todos[0].completed=!0;var Q,V,W=n(10),Z=n(22),$=n(26),ee=n(23),te=n(25),ne=n(24),re=function e(t){var n=t.initialState;Object(W.a)(this,e),this.namespace=void 0,this.state=void 0,void 0===this.state&&(this.state=n)};({inferReducer:function(e){return e},inferEffect:function(e){return e}}).inferEffect((function(e,t){return console.log(e),Promise.resolve(1)}));var oe,ae=(oe=!1,Q=function(e,t,n){n.enumerable=oe},V=function(e){function t(e){var n;return Object(W.a)(this,t),(n=Object($.a)(this,Object(ee.a)(t).call(this,e))).initialState={name:"xx",id:"1"},n.namespace=void 0,console.log(n.state),n}return Object(te.a)(t,e),Object(Z.a)(t,[{key:"setName",value:function(e){this.state.name=e}},{key:"delay",value:function(e){}},{key:"delay3",value:function(){return Promise.resolve(123)}}]),t}(re),Object(ne.a)(V.prototype,"setName",[Q],Object.getOwnPropertyDescriptor(V.prototype,"setName"),V.prototype),V),ce=document.createElement("div");document.body.append(ce),B.a.render(i.a.createElement(i.a.Fragment,null,i.a.createElement((function(){return i.a.createElement(r.a,{store:z},i.a.createElement(E,null),i.a.createElement(I,null))}),null),i.a.createElement("h2",null,"mobx demo"),i.a.createElement("hr",null)),ce);new ae({})}},[[27,1,2]]]);
//# sourceMappingURL=main.fa91f2de.chunk.js.map