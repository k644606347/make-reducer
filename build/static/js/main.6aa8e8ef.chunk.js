(window["webpackJsonpmake-reducer"]=window["webpackJsonpmake-reducer"]||[]).push([[0],{25:function(e,t,r){e.exports=r(35)},35:function(e,t,r){"use strict";r.r(t);var n=r(11),o=r(2);var c=function(e){var t=e.dispatch,r=e.getState;return function(e){return function(n){return"function"===typeof n?n(t,r):e(n)}}},a=r(0),i=r.n(a),u=r(7),l=r(1);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function f(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var b=function(e,t){return e+":"+t},d=function(e){var t=e.indexOf(":");return[e.substring(0,t),e.substring(t+1)]};function p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?p(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):p(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var v=function(e){var t=[],r=e.name,n=e.state;return{infer:function(e){return e},inferEffect:function(e){return e},baseReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,o=arguments.length>1?arguments[1]:void 0,c=o.type,a=o.payload,i=d(c),u=i[1];if(i[0]!==r)return e;var l=t.find((function(e){return e[0]===u}));if(l)return f({},e,{},l[1](e,a,u));var s=new Error("action.type = ".concat(c,"\u6ca1\u6709\u5bf9\u5e94\u7684reducer\u5904\u7406\u51fd\u6570"));return console.error(s),e},subscribe:function(e,n){var o={},c=function(n){o[n]=function(e){return{type:b(r,n),payload:e}},t.push([n,e[n]])};for(var a in e)c(a);var i=function(e){var t=n[e];o[e]=function(e){return function(){return"function"===typeof t&&t(e,arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1])}}};for(var u in n)i(u);return o}}}({name:"User",state:{loadStatus:"beforeload",loadMsg:"",name:"tom",id:"5858fccee138233f9d645621",label:["student","human"]}}),j=v.subscribe,g=v.infer,h=v.inferEffect,P=(g((function(e,t,r){return m({},e,{loadStatus:t})})),j(m({setName:function(e,t,r){return m({},e,{name:t})},loadStatus:g((function(e,t,r){return m({},e,{loadStatus:t})}))},{loadStatus:function(e,t,r){return O({},e,{loadStatus:t})},loadDone:function(e,t){return O({},e,{loadMsg:t})},loadError:function(e,t){return O({},e,{loadMsg:t})},loading:function(e,t){return O({},e,{loadMsg:t})},beforeload:function(e,t){return O({},e,{loadMsg:t})}},{addLabel:g((function(e,t,r){return m({},e,{label:[].concat(Object(u.a)(e.label),Object(u.a)(t))})})),test:g((function(e,t,r){return m({},e)}))}),{delay:h((function(e,t,r){return t(P.loading("loading")),new Promise((function(t,r){setTimeout((function(){t(e)}),500)})).then((function(r){return t(P.loadDone("done")),t(P.addLabel([e])),r})).catch((function(){t(P.loadError("error"))}))}))})),w=v,S=Object(n.b)((function(e){return{user:e.users.user,name:e.tests.test.name,label:e.users.user.label,loadStatus:e.users.user.loadStatus}}))((function(e){return i.a.createElement("div",null,i.a.createElement("input",{placeholder:"\u8bf7\u586b\u5199label",id:"label-input"}),i.a.createElement("button",{disabled:"loading"===e.loadStatus,onClick:function(t){var r=document.querySelector("#label-input");e.dispatch(P.addLabel([r?r.value:""]))}},"\u7acb\u5373\u6dfb\u52a0\u4e00\u4e2alabel!"),i.a.createElement("button",{disabled:"loading"===e.loadStatus,onClick:function(t){var r=document.querySelector("#label-input");e.dispatch(P.delay(r?r.value:"")).then((function(e){console.log("promise then:",e)}))}},"\u5ef6\u8fdf\u4e00\u6bb5\u65f6\u95f4\u540e\uff0c\u6dfb\u52a0label!"),i.a.createElement("p",null,"\u7528\u6237\u4fe1\u606f: "),i.a.createElement("pre",null,JSON.stringify(e.user,null,4)))})),E=r(19);function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var x=function(e){var t=e.namespace,r=e.initialState,n=e.reducers,o={},c=function(e){o[e]=function(r){return k({},r,{type:t+":"+e})}};for(var a in n)c(a);return{actions:o,reducer:function(){var e,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,c=arguments.length>1?arguments[1]:void 0,a=c.type,i=a.indexOf(":"),u=a.substring(0,i),l=a.substring(i+1);if(u!==t)return o;for(var s in n)s===l&&(e=n[s]);if(!e){var f=new Error("action:".concat(c,"\u6ca1\u6709\u5bf9\u5e94\u7684reducer\u5904\u7406\u51fd\u6570"));return console.error(f),o}var b=e(o,c);return console.log(b,e),b?k({},o,{},b):o}}},N=x({namespace:"test",initialState:{name:"tom",id:"5858fccee138233f9d645621",label:["student","human"]},reducers:{update:function(e,t){t.type;return k({},Object(E.a)(t,["type"]))},addLabel:function(e,t){var r=t.label;if(r)return{label:[].concat(Object(u.a)(e.label),Object(u.a)(r))}}}}),C=r(5);function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?T(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var R=function(e,t){return e+":"+t},J=function(e){var t=e.indexOf(":");return[e.substring(0,t),e.substring(t+1)]};function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var q=function(e){var t=[],r=e.name,n=e.state;return{infer:function(e){return e},inferEffect:function(e){return e},baseReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n,o=arguments.length>1?arguments[1]:void 0,c=o.type,a=o.payload,i=J(c),u=i[1];if(i[0]!==r)return e;var l=t.find((function(e){return e[0]===u}));if(l)return M({},e,{},l[1](e,a,u));var s=new Error("action.type = ".concat(c,"\u6ca1\u6709\u5bf9\u5e94\u7684reducer\u5904\u7406\u51fd\u6570"));return console.error(s),e},subscribe:function(e,n){var o={},c=function(n){o[n]=function(e){return{type:R(r,n),payload:e}},t.push([n,e[n]])};for(var a in e)c(a);var i=function(e){var t=n[e];o[e]=function(e){return function(){return"function"===typeof t&&t(e,arguments.length<=0?void 0:arguments[0],arguments.length<=1?void 0:arguments[1])}}};for(var u in n)i(u);return o}}}({name:"demo1",state:{name:"x",id:"y",desc:"x an y"}}),_=q.subscribe({setName:q.infer((function(e,t,r){return I({},e,{name:t})})),setID:q.infer((function(e,t,r){return I({},e,{id:t})}))},{delaySetName:q.inferEffect((function(e,t,r){return console.log("setTimeout before",r()),new Promise((function(n,o){setTimeout((function(){console.log("setTimeout",r()),t(_.setName(e)),console.log("setName after",r()),n(r())}),3e3)}))}))});function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function H(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(r,!0).forEach((function(t){Object(l.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function U(){var e=function(){var e=Object(a.useReducer)((function(e){return{x:e.x+1}}),{x:1}),t=Object(C.a)(e,2);return{state:t[0],dispatch:t[1]}}(),t=(e.state,e.dispatch,function(e){var t=Object(a.useReducer)(e.model.baseReducer,e.initialState),r=Object(C.a)(t,2),n=r[0],o=r[1],c=e.actions,i=(e.initialState,e.model,{});function u(){return n}var l=function(e){i[e]=function(t){var r=c[e](t);return"function"===typeof r?r(o,u):o(r)}};for(var s in c)l(s);return[n,i]}({initialState:{name:"x",id:"y"},actions:_,model:q})),r=Object(C.a)(t,2),n=r[0],o=r[1],c=Object(a.useState)({id:"state3",title:"\u72b6\u60013",loadStatus:"beforeload"}),u=Object(C.a)(c,2),l=u[0],s=u[1];return i.a.createElement("div",null,i.a.createElement("div",{onClick:function(e){o.delaySetName(Math.random()+"")}},n.name),i.a.createElement("div",{dangerouslySetInnerHTML:{__html:"<\u767e\u5ea6>xxxx</\u767e\u5ea6>"}}),i.a.createElement("div",{onClick:function(e){o.setID(n.id+1),o.delaySetName(n.name+"1")}},"click herer! Demo1.state = ",JSON.stringify(n)),i.a.createElement("div",{onClick:function(e){s(H({},l,{loadStatus:"loading"})),setTimeout((function(){console.log(l),s(H({},l,{loadStatus:"loaded"})),console.log(l)}),3e3),setTimeout((function(){s(H({},l,{id:l.id+"1"}))}),1e3)}},"click here! stat3 = ",JSON.stringify(l)))}var z,A={test:N.reducer},B={user:w.baseReducer},G=Object(o.c)({tests:Object(o.c)(A),users:Object(o.c)(B)}),K=(z=G,Object(o.a)(c),Object(o.d)(z,Object(o.a)(c)));console.log(K);var Q=r(8),V=r.n(Q),W=r(15),X=Object(W.b)({todos:[],get completedCount(){return this.todos.filter((function(e){return e.completed})).length}});Object(W.a)((function(){console.log("Completed %d of %d items",X.completedCount,X.todos.length)})),X.todos[0]={title:"Take a walk",completed:!1},X.todos[0].completed=!0;var Y,Z,$=r(10),ee=r(20),te=r(24),re=r(21),ne=r(23),oe=r(22),ce=function e(t){var r=t.initialState;Object($.a)(this,e),this.namespace=void 0,this.state=void 0,void 0===this.state&&(this.state=r)};({inferReducer:function(e){return e},inferEffect:function(e){return e}}).inferEffect((function(e,t){return console.log(e),Promise.resolve(1)}));var ae,ie=(ae=!1,Y=function(e,t,r){r.enumerable=ae},Z=function(e){function t(e){var r;return Object($.a)(this,t),(r=Object(te.a)(this,Object(re.a)(t).call(this,e))).initialState={name:"xx",id:"1"},r.namespace=void 0,console.log(r.state),r}return Object(ne.a)(t,e),Object(ee.a)(t,[{key:"setName",value:function(e){this.state.name=e}},{key:"delay",value:function(e){}},{key:"delay3",value:function(){return Promise.resolve(123)}}]),t}(ce),Object(oe.a)(Z.prototype,"setName",[Y],Object.getOwnPropertyDescriptor(Z.prototype,"setName"),Z.prototype),Z),ue=document.createElement("div");document.body.append(ue),V.a.render(i.a.createElement(i.a.Fragment,null,i.a.createElement((function(){return i.a.createElement(n.a,{store:K},i.a.createElement(S,null),i.a.createElement(U,null))}),null),i.a.createElement("h2",null,"mobx demo"),i.a.createElement("hr",null)),ue);new ie({})}},[[25,1,2]]]);
//# sourceMappingURL=main.6aa8e8ef.chunk.js.map